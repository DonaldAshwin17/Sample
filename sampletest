// Assume data is the array of records retrieved from the database
const data = [
  // Example records
  { clauseSubthemes: ['theme1', 'theme2'], setSubtheme: 'theme1, theme3' },
  { clauseSubthemes: ['theme4'], setSubtheme: 'theme2' },
  // ... other records
];

const subthemes = ['theme1', 'theme2']; // Your array of subthemes

// Function to check if any subtheme exists in the JSONB array
const isInClauseSubthemes = (clauseSubthemes: string[], subthemes: string[]): boolean => {
  return subthemes.some(theme => clauseSubthemes.includes(theme));
};

// Function to check if any subtheme exists in the text column
const isInSetSubtheme = (setSubtheme: string, subthemes: string[]): boolean => {
  return subthemes.some(theme => setSubtheme.includes(theme));
};

// Filter records based on the presence of any subtheme in clauseSubthemes or setSubtheme
const filteredData = data.filter(record => 
  isInClauseSubthemes(record.clauseSubthemes, subthemes) || 
  isInSetSubtheme(record.setSubtheme, subthemes)
);

console.log(filteredData);
